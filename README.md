# Makise Kurisu

> 拟人化实时交互优先的个人 AI 数字分身

## 项目定位

**Makise Kurisu** 是一个拟人化实时交互优先的个人 AI 数字分身，而非传统企业级任务处理 Agent。

```
传统 Agent: 任务处理能力 > 对话体验
我们: 拟人化交互体验 > 任务处理能力
```

### 成功标准

- 用户愿意和她聊 30 分钟以上（而非 5 分钟解决问题）
- 用户感觉在和一个"真实的人"对话（而非工具）
- 用户会期待下次对话（而非用完即走）

## 核心架构

五层分层解耦架构：

```
┌─────────────────────────────────────────────────────┐
│  L1. 交互网关层 (Gateway)                            │
│  - 多渠道接入（文本、语音、直播）                     │
│  - 流式并行处理，延迟优化（目标≤500ms）              │
└─────────────────────────────────────────────────────┘
                       ↓
┌─────────────────────────────────────────────────────┐
│  L2. 人设一致性引擎层 (Persona Engine) ⭐核心        │
│  - 核心人设硬约束 + 动态心智模型 + 三层合规校验      │
└─────────────────────────────────────────────────────┘
                       ↓
┌─────────────────────────────────────────────────────┐
│  L3. Agent 编排层 (Agent Orchestrator)              │
│  - Lead Agent + Conversation Agent + Task Agent     │
│  - 基于 LangGraph 状态机驱动                        │
└─────────────────────────────────────────────────────┘
                       ↓
┌─────────────────────────────────────────────────────┐
│  L4. 混合记忆引擎层 (Hybrid Memory)                 │
│  - 瞬时记忆 → 短期记忆 → 长期记忆 → 技能记忆        │
└─────────────────────────────────────────────────────┘
                       ↓
┌─────────────────────────────────────────────────────┐
│  L5. 基础设施层 (Infrastructure)                    │
│  - 模型配置化管理 + MCP 插件体系 + SQLite 存储      │
└─────────────────────────────────────────────────────┘
```

## 技术栈

| 模块 | 选型 | 说明 |
|------|------|------|
| 编排引擎 | LangGraph | 状态机驱动，任务调度 |
| 记忆系统 | Mem0 | 分层记忆，冲突检测 |
| 插件体系 | MCP SDK | 复用社区生态 |
| 存储 | SQLite | 本地优先 |
| 开发语言 | TypeScript | 严格类型 |

## MVP 目标

- [x] 20 轮对话人设不崩
- [x] 记住 5 轮以内对话
- [x] 1-2 个基础任务
- [x] 文本流式输出
- [x] 成本 ≤ ¥500/月

## 项目结构

```
kurisu/
├── src/
│   ├── core/        # 人设引擎、模型配置化
│   ├── agents/      # Agent 实现
│   ├── memory/      # 记忆系统
│   ├── gateway/     # 交互网关
│   └── config/      # 配置管理
├── docs/
│   ├── design/      # 设计文档
│   └── research/    # 调研资料
├── tests/
└── .claude/         # Claude Code 配置
```

## 快速开始

```bash
# 安装依赖
npm install

# 配置环境变量
cp .env.example .env

# 启动开发模式
npm run dev
```

## 开发规范

- 先跑通最小闭环，再堆功能
- 所有模块接口抽象，强依赖注入
- TypeScript 严格类型，禁止 any
- 核心模块先写测试，再写业务代码
- 敏感信息禁止硬编码

## 文档

- [架构设计](docs/design/ARCHITECTURE.md)
- [模型配置化](docs/design/MODEL-CONFIG.md)
- [RP 模型参考](docs/research/RP-REFERENCE.md)

## License

MIT
